{% extends 'ablog/layout.html' %} 

{% block title %} Ablog {% endblock %}

{% block content %}
{% load static %}
<script src="{% static 'js/detail.js' %}"></script>
<script src="https://d3js.org/d3.v4.min.js"></script>
{% comment %} https://t3.ftcdn.net/jpg/05/91/97/64/360_F_591976463_KMZyV6obpsrN2bJJJkYW0bzoH2XxLTlA.jpg {% endcomment %}
<div class="grow flex-col">
    {% comment %} <h1>{{ id }}</h1>   {% endcomment %}
    <div class="h-64 w-full">
        <div class="bg-cover bg-center h-full w-full" style="background-image: url({{data.coverImage}})"></div>
    </div>
    <div class="flex h-fit min-h-1/3 w-full justify-end">
        
        {% comment %} content {% endcomment %}
        <div class="flex flex-col w-full h-fit min-h-100 py-10 px-20">
            <h1 class="text-gray-600 text-2xl font-medium">{{ data.topic }}</h1>
            <p class="py-5 text-indigo-600 text-md font-medium">{{data.content | linebreaksbr}}</p>
            <div id="chart" class="flex h-fit"></div>
        </div>

        {% comment %} right buttons group {% endcomment %}
        <div class="flex flex-col w-1/3 h-96 items-center">
            <h1 class="py-10 text-gray-600 text-xl font-medium">{{data.date}}</h1>
            <button id="bt-play-audio" type="button" class="w-56 text-white text-xl bg-indigo-400 hover:bg-indigo-500 focus:ring-4 focus:ring-indigo-300 font-medium rounded-lg px-5 py-2.5 mr-2 mb-2 focus:outline-none" onclick="playAudio()">
                Play Audio
            </button>

            <button id='bt-edit' type="button" class="mt-12 w-40 text-white text-md bg-indigo-400 hover:bg-indigo-500 focus:ring-4 focus:ring-indigo-300 font-medium rounded-lg px-5 py-2.5 mr-2 mb-2 focus:outline-none" onclick="editBlog()">
                Edit
            </button>

            <button id='bt-delete' type="button" class="mt-3 w-40 text-red-400 bg-white border border-red-300 focus:ring-4 hover:bg-red-100 focus:ring-4 focus:ring-red-200 font-medium rounded-lg text-md px-5 py-2.5 mr-2 mb-2" onclick="deleteBlog()">
                Delete
            </button>

            <button id='bt-refresh' type="button" class="mt-3 w-40 text-red-400 bg-white border border-red-300 focus:ring-4 hover:bg-red-100 focus:ring-4 focus:ring-red-200 font-medium rounded-lg text-md px-5 py-2.5 mr-2 mb-2" onclick="refreshBlog()">
                refresh
            </button>
        </div>
        

    </div>
</div>

<script>
// Set Dimensions
const xSize = 200;
const ySize = 200;
const margin = 30;
const xMax = xSize - margin*2;
const yMax = ySize - margin*2;

// Create Random Points
const numPoints = 20;
let data = [];
for (let i = 0; i < numPoints; i++) {
  data.push([Math.random() * xMax, Math.random() * yMax]);
}

// Append SVG Object to the Page
const svg = d3.select("#chart")
  .append("svg")
  .attr("viewBox", "0 0 200 200")
  .append("g")
  .attr("transform","translate(" + margin + "," + margin + ")");

// X Axis
const x = d3.scaleLinear()
  .domain([0, 200])
  .range([0, xMax]);

svg.append("g")
  .attr("transform", "translate(0," + yMax + ")")
  .call(d3.axisBottom(x));

// Y Axis
const y = d3.scaleLinear()
  .domain([0, 200])
  .range([ yMax, 0]);

svg.append("g")
  .call(d3.axisLeft(y));

// Dots
svg.append('g')
  .selectAll("dot")
  .data(data).enter()
  .append("circle")
  .attr("cx", function (d) { return d[0] } )
  .attr("cy", function (d) { return d[1] } )
  .attr("r", 2)
  .style("fill", "blue");

const refreshBlog = () => {
    console.log('func : refresh chart')
}

const playAudio = () => {
    console.log('func : play audio')
}

const editBlog = () => {
    console.log('func : edit blog')
}

const deleteBlog = () => {
    console.log('func : delete blog')
}

</script>

{% endblock %}